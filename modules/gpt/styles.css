:root{
  color-scheme: dark;
  --bg:#0b0f14; --bg-elev:#0f141a; --bg-glass:rgba(16,21,28,.55);
  --ink:#e6edf3; --ink-dim:#9aa4b2; --ink-sub:#7c8590;
  --line:1px solid rgba(255,255,255,.06);
  --soft:1px solid rgba(255,255,255,.05);
  --accent:#78a6ff; --accent-2:#75f0c1; /* آبی روشن + سبز نعنایی */
  --user-grad-1:#2a2f38; --user-grad-2:#3a404c;
  --ai-bubble:#121923;

  --r-xl:18px; --r-lg:14px; --r-md:12px; --r-sm:10px;
  --sh-1:0 6px 24px rgba(0,0,0,.32), 0 2px 8px rgba(0,0,0,.22);
  --sh-2:0 10px 32px rgba(0,0,0,.38), 0 4px 14px rgba(0,0,0,.26);
}

*{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
html,body{height:100%}
body{
  margin:0; background:
    radial-gradient(1100px 520px at 80% -10%, rgba(120,166,255,.18), transparent 60%),
    radial-gradient(900px 500px at -10% 0%, rgba(117,240,193,.14), transparent 55%),
    var(--bg);
  color:var(--ink);
  font:15px/1.6 -apple-system,BlinkMacSystemFont,"SF Pro Text","IRANSans",system-ui,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
}

/* App shell */
.app{max-width:920px;margin:0 auto;padding:12px 12px 120px}

/* Header (sticky) */
.app__header{
  position:sticky;top:0;z-index:10;
  background:linear-gradient(to bottom, rgba(11,15,20,.9), rgba(11,15,20,.55) 40%, transparent);
  backdrop-filter: saturate(140%) blur(6px);
  padding:8px 0;
}
.toolbar{
  display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:var(--r-xl);
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:var(--line); box-shadow:var(--sh-1);
}
.icon-btn{
  height:38px;width:38px;border-radius:12px;border:var(--soft);
  background:rgba(255,255,255,.05); color:var(--ink);
  display:grid;place-items:center; cursor:pointer;
}
.icon-btn:active{transform:translateY(1px);opacity:.9}
.title{display:flex;align-items:center;gap:8px;margin:0;font-size:18px;letter-spacing:.2px}
.title .dot{width:10px;height:10px;border-radius:999px;background:linear-gradient(135deg, var(--accent), var(--accent-2));display:inline-block}
.title .t{font-weight:800}
.actions{margin-inline-start:auto}
.pill-btn{
  height:38px; padding:0 12px; border-radius:12px; border:var(--soft);
  background:rgba(255,255,255,.05); color:var(--ink);
}
.pill-btn:active{transform:translateY(1px);opacity:.9}

/* Chat area */
.chat{display:flex;flex-direction:column;gap:12px;padding:12px 6px 0}
.message{display:grid;grid-template-columns:40px 1fr; gap:10px;align-items:start}
.message.user{grid-template-columns:1fr 40px}
.message .avatar{
  width:40px;height:40px;border-radius:50%;display:grid;place-items:center;
  border:var(--soft);background:rgba(255,255,255,.06); font-size:18px;
}
.message.user .avatar{order:2}
.bubble{
  position:relative;border-radius:var(--r-lg);border:var(--soft);box-shadow:var(--sh-1);
}
.bubble.ai{background:var(--ai-bubble); padding:12px 14px}
.bubble.user{
  background:linear-gradient(145deg, var(--user-grad-1), var(--user-grad-2));
  color:#fff; padding:12px 14px;
}
.primary{margin:0;white-space:pre-wrap;font-size:15px}
.secondary{margin:.35rem 0 0;color:var(--ink-sub);font-size:13px}
.meta{margin-top:6px;display:flex;gap:8px;align-items:center;color:var(--ink-dim);font-size:11px}
.meta .chip{padding:.2rem .5rem;border-radius:999px;border:var(--soft);background:rgba(255,255,255,.05)}
.actions-row{display:flex;gap:6px;flex-wrap:wrap}
.act{
  padding:.35rem .55rem;border-radius:10px;border:var(--soft);
  background:rgba(255,255,255,.05); color:var(--ink);
  font-size:12px;cursor:pointer;transition:transform .08s ease, background .18s ease; user-select:none;
}
.act:active{transform:translateY(1px);opacity:.9}

/* typing (skeleton) */
.message.loading .bubble{min-height:46px}
.dots{display:inline-flex;gap:6px;margin-inline-start:6px;vertical-align:middle}
.dots span{width:6px;height:6px;border-radius:50%;background:currentColor;opacity:.55;animation:d 1.3s infinite ease-in-out}
.dots span:nth-child(2){animation-delay:.2s}
.dots span:nth-child(3){animation-delay:.4s}
@keyframes d{0%,80%,100%{transform:scale(.6);opacity:.4}40%{transform:scale(1);opacity:1}}

/* Suggestions */
.suggestions{display:flex;flex-wrap:wrap;gap:10px;margin:6px 6px 0}
.suggestion{
  padding:10px 14px;border-radius:999px;border:var(--soft);
  background:rgba(255,255,255,.05); color:var(--ink);
  font-size:13.5px; cursor:pointer; transition:transform .08s ease, background .18s ease;
}
.suggestion:active{transform:translateY(1px);opacity:.9}

/* Composer (glass) */
.composer{
  position:fixed;inset-inline:0;bottom:12px;display:grid;place-items:center;pointer-events:none
}
.composer__form{
  width:min(920px, calc(100% - 24px));
  display:grid;grid-template-columns:1fr 110px;gap:10px;pointer-events:auto;
  border-radius:20px;border:var(--line); background:var(--bg-glass);
  backdrop-filter: blur(14px) saturate(140%); box-shadow:var(--sh-2); padding:10px;
}
#prompt-input{
  width:100%; border:1px solid rgba(255,255,255,.08); background:#0d131a;
  color:var(--ink); border-radius:14px; padding:12px 14px; outline:none; resize:none; max-height:180px
}
#prompt-input::placeholder{color:var(--ink-sub)}
#prompt-input:focus{border-color:rgba(120,166,255,.6); box-shadow:0 0 0 3px rgba(120,166,255,.2)}
.send-btn{
  border:0;border-radius:14px;color:#fff;font-weight:700;letter-spacing:.2px;
  background:linear-gradient(135deg, var(--accent), var(--accent-2));
  box-shadow:0 10px 24px rgba(120,166,255,.35);
  padding:12px 14px; cursor:pointer; transition:transform .08s ease, box-shadow .2s ease, opacity .2s
}
.send-btn:disabled{opacity:.6;box-shadow:none;cursor:default}
.send-btn:active{transform:translateY(1px)}
.tip{margin-top:6px;text-align:center;color:var(--ink-dim);font-size:12px}

/* animations */
.animate-in{animation:fade-in .25s ease both}
@keyframes fade-in{from{opacity:0;transform:translateY(4px)}to{opacity:1;transform:none}}

/* Responsive */
@media (max-width:520px){
  .title{font-size:16px}
  .composer__form{grid-template-columns:1fr 96px}
  .send-btn{font-size:14px}
}
